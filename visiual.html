<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deep Physics: Hybrid Neuro-Symbolic Architecture</title>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep: #050505;
            --glass-bg: rgba(20, 30, 50, 0.6);
            --glass-border: rgba(100, 200, 255, 0.1);
            --neon-blue: #00f3ff;
            --neon-purple: #bc13fe;
            --neon-green: #0aff60;
            --text-primary: #ffffff;
            --text-dim: #8b9bb4;
        }

        body {
            background-color: var(--bg-deep);
            background-image: 
                radial-gradient(circle at 50% 0%, #1a1a40 0%, transparent 60%),
                linear-gradient(0deg, transparent 24%, rgba(0, 243, 255, .03) 25%, rgba(0, 243, 255, .03) 26%, transparent 27%, transparent 74%, rgba(0, 243, 255, .03) 75%, rgba(0, 243, 255, .03) 76%, transparent 77%, transparent),
                linear-gradient(90deg, transparent 24%, rgba(0, 243, 255, .03) 25%, rgba(0, 243, 255, .03) 26%, transparent 27%, transparent 74%, rgba(0, 243, 255, .03) 75%, rgba(0, 243, 255, .03) 76%, transparent 77%, transparent);
            background-size: 100% 100%, 50px 50px, 50px 50px;
            color: var(--text-primary);
            font-family: 'Rajdhani', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* 标题区 */
        header {
            margin-top: 40px;
            text-align: center;
            z-index: 10;
        }

        h1 {
            font-size: 3.5rem;
            text-transform: uppercase;
            letter-spacing: 4px;
            margin: 0;
            background: linear-gradient(90deg, #fff, var(--neon-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(0, 243, 255, 0.5);
        }

        .subtitle {
            font-family: 'JetBrains Mono', monospace;
            color: var(--neon-purple);
            font-size: 0.9rem;
            margin-top: 10px;
            letter-spacing: 1px;
        }

        /* 主容器 */
        .mainframe {
            position: relative;
            width: 1000px;
            margin: 40px 0 80px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0; /* 用连接线连接 */
        }

        /* 连接线 (光纤) */
        .fiber-optic {
            width: 2px;
            height: 60px;
            background: rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .fiber-optic::after {
            content: '';
            position: absolute;
            top: -100%;
            left: 0;
            width: 100%;
            height: 50%;
            background: linear-gradient(to bottom, transparent, var(--neon-blue), transparent);
            box-shadow: 0 0 10px var(--neon-blue);
            animation: dataflow 2s infinite linear;
            opacity: 0.5;
        }

        @keyframes dataflow {
            0% { top: -100%; }
            100% { top: 200%; }
        }

        /* 模块卡片通用样式 */
        .card {
            width: 100%;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(15px);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            position: relative;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .card:hover {
            border-color: var(--neon-blue);
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.2);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 10px;
            margin-bottom: 15px;
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 700;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tensor-tag {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--neon-green);
            background: rgba(10, 255, 96, 0.1);
            padding: 4px 8px;
            border-radius: 4px;
            border: 1px solid rgba(10, 255, 96, 0.3);
        }

        /* 特定模块设计 */

        /* 1. 输入: 示波器 */
        #inputCanvas {
            width: 100%;
            height: 80px;
            background: rgba(0,0,0,0.3);
            border-radius: 4px;
            border: 1px solid #333;
        }

        /* 2. CNN: 压缩动画 */
        .compression-viz {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 5px;
            height: 60px;
        }

        .block {
            height: 40px;
            background: rgba(0, 243, 255, 0.2);
            border: 1px solid var(--neon-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            color: var(--neon-blue);
            transition: all 0.5s;
        }
        
        /* 3. Transformer: 内部结构 */
        .tf-internal {
            display: flex;
            gap: 20px;
            justify-content: space-around;
        }

        .tf-module {
            flex: 1;
            background: rgba(188, 19, 254, 0.1);
            border: 1px solid rgba(188, 19, 254, 0.3);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            position: relative;
        }

        .rope-icon {
            width: 40px;
            height: 40px;
            border: 2px dashed var(--neon-purple);
            border-radius: 50%;
            margin: 0 auto 10px;
            animation: spin 10s linear infinite;
            display: grid;
            place-items: center;
        }
        .rope-icon::after {
            content: 'θ';
            font-family: serif;
            font-style: italic;
        }

        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* 4. 输出: 仪表盘 */
        .metrics-container {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
        }

        .metric {
            background: rgba(0,0,0,0.4);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .metric-val {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2rem;
            font-weight: 700;
            color: var(--neon-green);
            text-shadow: 0 0 10px rgba(10, 255, 96, 0.5);
        }

        .metric-label {
            color: var(--text-dim);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 5px;
        }

        /* 控制台 */
        .controls {
            position: fixed;
            bottom: 30px;
            z-index: 100;
        }

        .inject-btn {
            background: transparent;
            color: var(--neon-blue);
            border: 2px solid var(--neon-blue);
            padding: 15px 40px;
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 0 10px var(--neon-blue), inset 0 0 10px var(--neon-blue);
        }

        .inject-btn:hover {
            background: var(--neon-blue);
            color: #000;
            box-shadow: 0 0 30px var(--neon-blue);
        }

        .inject-btn:active {
            transform: scale(0.95);
        }

        /* 脉冲动画 */
        .pulse-packet {
            position: absolute;
            left: 50%;
            width: 6px;
            height: 20px;
            background: #fff;
            box-shadow: 0 0 15px #fff, 0 0 30px var(--neon-blue);
            border-radius: 3px;
            transform: translateX(-50%);
            z-index: 99;
            opacity: 0;
            pointer-events: none;
        }

        @keyframes shoot {
            0% { top: 180px; opacity: 1; height: 20px; }
            100% { top: 95%; opacity: 0; height: 5px; }
        }

        /* 解释框 */
        .explanation {
            font-size: 0.85rem;
            color: var(--text-dim);
            line-height: 1.4;
            margin-top: 10px;
            border-left: 2px solid var(--neon-blue);
            padding-left: 10px;
        }

    </style>
</head>
<body>

    <header>
        <h1>Hybrid Physics-AI Engine</h1>
        <div class="subtitle">TEMPORAL FOLDING // RESONANT ENCODING // PARAMETER DECOUPLING</div>
    </header>

    <div class="mainframe">
        
        <!-- 粒子光束动画容器 -->
        <div id="packet" class="pulse-packet"></div>

        <!-- 1. 原始输入 -->
        <div class="card" id="module-input">
            <div class="card-header">
                <div class="card-title">
                    <span style="color:var(--neon-blue)">●</span> Raw Signal Input
                </div>
                <div class="tensor-tag">Tensor: [B, 72000, 1]</div>
            </div>
            <canvas id="inputCanvas"></canvas>
            <div class="explanation">
                10 mins @ 120Hz high-frequency sampling. Contains sensor noise (N≈0.05).
            </div>
        </div>

        <div class="fiber-optic"></div>

        <!-- 2. CNN Backbone -->
        <div class="card" id="module-cnn">
            <div class="card-header">
                <div class="card-title">
                    <span style="color:var(--neon-blue)">◈</span> 1D-CNN Compressor
                </div>
                <div class="tensor-tag">Tensor: [B, 1125, 256]</div>
            </div>
            <div class="compression-viz">
                <div class="block" style="width: 100%; opacity: 0.3;">Raw</div>
                <div style="color: #fff">→</div>
                <div class="block" style="width: 60%; opacity: 0.6;">Conv1</div>
                <div style="color: #fff">→</div>
                <div class="block" style="width: 30%; opacity: 0.8;">Conv2</div>
                <div style="color: #fff">→</div>
                <div class="block" style="width: 15%; background: var(--neon-blue); color: #000; font-weight: bold;">Latent</div>
            </div>
            <div class="explanation">
                <strong>Temporal Folding:</strong> Compresses sequence length by 64x while acting as a learnable low-pass filter to denoise data.
            </div>
        </div>

        <div class="fiber-optic"></div>

        <!-- 3. Transformer -->
        <div class="card" id="module-transformer">
            <div class="card-header">
                <div class="card-title">
                    <span style="color:var(--neon-purple)">❖</span> Modern Transformer
                </div>
                <div class="tensor-tag">Depth: 4 Layers</div>
            </div>
            <div class="tf-internal">
                <div class="tf-module">
                    <div class="rope-icon"></div>
                    <div style="color:var(--neon-purple); font-weight:700">RoPE</div>
                    <div style="font-size:0.7rem; margin-top:5px; color:var(--text-dim)">Rotary Embedding<br>Captures Phase Shift</div>
                </div>
                <div class="tf-module">
                    <div style="font-size:1.5rem">⎍</div>
                    <div style="color:#f472b6; font-weight:700; margin-top:8px">SwiGLU</div>
                    <div style="font-size:0.7rem; margin-top:5px; color:var(--text-dim)">Gated Linear Unit<br>High Precision</div>
                </div>
                <div class="tf-module">
                    <div style="font-size:1.5rem">⚡</div>
                    <div style="color:#fff; font-weight:700; margin-top:8px">RMSNorm</div>
                    <div style="font-size:0.7rem; margin-top:5px; color:var(--text-dim)">Stable Dynamics</div>
                </div>
            </div>
            <div class="explanation" style="border-color: var(--neon-purple)">
                <strong>Physics Resonance:</strong> RoPE encodes position as rotation, resonating with the pendulum's periodic nature to detect minute frequency decays.
            </div>
        </div>

        <div class="fiber-optic"></div>

        <!-- 4. 输出 -->
        <div class="card" id="module-output" style="border-color: var(--neon-green); box-shadow: 0 0 15px rgba(10, 255, 96, 0.1);">
            <div class="card-header">
                <div class="card-title">
                    <span style="color:var(--neon-green)">◼</span> Parameter Decoupling
                </div>
                <div class="tensor-tag">Precision: 1e-4</div>
            </div>
            <div class="metrics-container">
                <div class="metric">
                    <div class="metric-val" id="val-k1">--.----</div>
                    <div class="metric-label">K1 (Friction)</div>
                </div>
                <div class="metric">
                    <div class="metric-val" id="val-k2">--.----</div>
                    <div class="metric-label">K2 (Air Drag)</div>
                </div>
                <div class="metric">
                    <div class="metric-val" id="val-n" style="color:var(--text-dim)">--.--</div>
                    <div class="metric-label">Noise Est.</div>
                </div>
            </div>
            <div class="explanation" style="border-color: var(--neon-green)">
                <strong>Attention Pooling:</strong> Automatically selects high-quality signal segments to perform robust parameter inversion.
            </div>
        </div>

    </div>

    <div class="controls">
        <button class="inject-btn" onclick="runInference()">INJECT DATA & INFER</button>
    </div>

    <script>
        // --- 1. Oscilloscope Animation ---
        const canvas = document.getElementById('inputCanvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let time = 0;

        function resize() {
            width = canvas.width = canvas.offsetWidth;
            height = canvas.height = canvas.offsetHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        function drawWave() {
            ctx.fillStyle = 'rgba(0, 5, 10, 0.2)'; // Fade effect
            ctx.fillRect(0, 0, width, height);

            ctx.beginPath();
            ctx.lineWidth = 2;
            ctx.strokeStyle = '#00f3ff';
            
            for (let x = 0; x < width; x++) {
                // Simulating a decaying sine wave with noise
                const t = x * 0.05 + time;
                const decay = Math.exp(-x / (width * 0.8));
                const signal = Math.sin(t) * (height/2 - 10) * decay;
                const noise = (Math.random() - 0.5) * 5; // Noise
                
                const y = height / 2 + signal + noise;
                if(x===0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();
            time += 0.2;
            requestAnimationFrame(drawWave);
        }
        drawWave();

        // --- 2. Inference Simulation Logic ---
        function runInference() {
            const btn = document.querySelector('.inject-btn');
            const packet = document.getElementById('packet');
            const k1Display = document.getElementById('val-k1');
            const k2Display = document.getElementById('val-k2');
            const nDisplay = document.getElementById('val-n');

            // 1. Lock Button
            btn.disabled = true;
            btn.style.opacity = 0.5;
            btn.innerText = "PROCESSING...";

            // 2. Reset Values
            k1Display.innerText = "0.0000";
            k2Display.innerText = "0.0000";
            k2Display.style.color = "#0aff60"; // Reset color

            // 3. Trigger Light Beam Animation
            packet.style.animation = 'none';
            packet.offsetHeight; /* trigger reflow */
            packet.style.animation = 'shoot 1.5s cubic-bezier(0.4, 0, 0.2, 1) forwards';

            // 4. Staged Activations (simulating layer processing)
            setTimeout(() => { document.getElementById('module-cnn').style.boxShadow = "0 0 40px var(--neon-blue)"; }, 400);
            setTimeout(() => { 
                document.getElementById('module-cnn').style.boxShadow = ""; 
                document.getElementById('module-transformer').style.boxShadow = "0 0 40px var(--neon-purple)";
            }, 800);
            setTimeout(() => { 
                document.getElementById('module-transformer').style.boxShadow = ""; 
                document.getElementById('module-output').style.boxShadow = "0 0 50px var(--neon-green)";
            }, 1200);

            // 5. Number Scramble Effect
            let scrambleInterval = setInterval(() => {
                k1Display.innerText = (Math.random() * 0.02).toFixed(4);
                k2Display.innerText = (Math.random() * 0.01).toFixed(4);
                nDisplay.innerText = (Math.random() * 0.1).toFixed(3);
            }, 50);

            // 6. Final Result
            setTimeout(() => {
                clearInterval(scrambleInterval);
                document.getElementById('module-output').style.boxShadow = "";
                
                // Set accurate "Physics" values
                k1Display.innerText = "0.0125";
                k2Display.innerText = "0.0027"; 
                nDisplay.innerText  = "0.048";

                // Visual Feedback for Success
                btn.disabled = false;
                btn.style.opacity = 1;
                btn.innerText = "INJECT DATA & INFER";
            }, 1500);
        }
    </script>
</body>
</html>